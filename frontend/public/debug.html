<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>QTER Debug - ç’°å¢ƒæª¢æŸ¥</title>
  <style>
    body { font-family: monospace; padding: 20px; background: #1e1e1e; color: #d4d4d4; }
    .ok { color: #4ade80; }
    .error { color: #f87171; }
    .warn { color: #fbbf24; }
    h1 { color: #60a5fa; }
    pre { background: #2d2d2d; padding: 15px; border-radius: 5px; overflow-x: auto; }
  </style>
</head>
<body>
  <h1>ğŸ” QTER ç’°å¢ƒè¨ºæ–·</h1>
  <div id="result"></div>

  <script type="module">
    const result = document.getElementById('result')

    function log(msg, type = 'ok') {
      result.innerHTML += `<div class="${type}">${msg}</div>`
    }

    // æª¢æŸ¥ç’°å¢ƒè®Šæ•¸
    log('<h2>1. ç’°å¢ƒè®Šæ•¸æª¢æŸ¥</h2>')

    const supabaseUrl = import.meta.env.VITE_SUPABASE_URL
    const supabaseKey = import.meta.env.VITE_SUPABASE_ANON_KEY

    if (supabaseUrl) {
      log(`âœ… VITE_SUPABASE_URL = ${supabaseUrl}`, 'ok')
    } else {
      log(`âŒ VITE_SUPABASE_URL æœªè¨­å®šï¼`, 'error')
      log(`   è«‹åœ¨ Vercel è¨­å®šï¼šVITE_SUPABASE_URL=https://ihhucjcbhyakrenmpryh.supabase.co`, 'warn')
    }

    if (supabaseKey) {
      log(`âœ… VITE_SUPABASE_ANON_KEY = ${supabaseKey.substring(0, 20)}...`, 'ok')
    } else {
      log(`âŒ VITE_SUPABASE_ANON_KEY æœªè¨­å®šï¼`, 'error')
      log(`   è«‹åœ¨ Vercel è¨­å®šç’°å¢ƒè®Šæ•¸`, 'warn')
    }

    // æ¸¬è©¦ Supabase é€£æ¥
    log('<h2>2. Supabase é€£æ¥æ¸¬è©¦</h2>')

    if (supabaseUrl && supabaseKey) {
      try {
        const testUrl = `${supabaseUrl}/rest/v1/forms?limit=1`
        const response = await fetch(testUrl, {
          headers: {
            'apikey': supabaseKey,
            'Authorization': `Bearer ${supabaseKey}`
          }
        })

        if (response.ok) {
          const data = await response.json()
          log(`âœ… Supabase é€£æ¥æˆåŠŸï¼`, 'ok')
          log(`   æ‰¾åˆ° ${data.length} å€‹å•å·`, 'ok')
        } else {
          log(`âŒ Supabase é€£æ¥å¤±æ•—ï¼š${response.status} ${response.statusText}`, 'error')
          const text = await response.text()
          log(`<pre>${text}</pre>`, 'error')
        }
      } catch (e) {
        log(`âŒ é€£æ¥éŒ¯èª¤ï¼š${e.message}`, 'error')
      }
    } else {
      log(`âš ï¸  è·³éæ¸¬è©¦ï¼ˆç’°å¢ƒè®Šæ•¸æœªè¨­å®šï¼‰`, 'warn')
    }

    // æª¢æŸ¥ç•¶å‰éƒ¨ç½²
    log('<h2>3. éƒ¨ç½²è³‡è¨Š</h2>')
    log(`ç•¶å‰ URL: ${window.location.href}`)
    log(`User Agent: ${navigator.userAgent}`)

    // çµ¦å‡ºä¿®å¾©æŒ‡ç¤º
    log('<h2>âœ… ä¿®å¾©æ­¥é©Ÿ</h2>')
    log('<pre>' +
`1. å‰å¾€ Vercel Dashboard
   https://vercel.com/dashboard

2. é¸æ“‡å°ˆæ¡ˆ â†’ Settings â†’ Environment Variables

3. æ–°å¢å…©å€‹è®Šæ•¸ï¼ˆè¤‡è£½è²¼ä¸Šï¼‰ï¼š

   VITE_SUPABASE_URL=https://ihhucjcbhyakrenmpryh.supabase.co

   VITE_SUPABASE_ANON_KEY=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImloaHVjamNiaHlha3Jlbm1wcnloIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMyMTk5MjksImV4cCI6MjA3ODc5NTkyOX0.lLn455Jg5iiW9JhfWS-nr__Np-z6H8lVHn4eI95rVUg

4. Environment é¸ Production

5. Save

6. Deployments â†’ Redeploy æœ€æ–°çš„éƒ¨ç½²

7. ç­‰å¾…éƒ¨ç½²å®Œæˆï¼ˆ1-2åˆ†é˜ï¼‰

8. é‡æ–°è¨ªå•é€™å€‹é é¢æª¢æŸ¥
` + '</pre>')
  </script>
</body>
</html>
